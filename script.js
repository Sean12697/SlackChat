var url = `${window.location.href}messages`;
var socket = io();
var memeLimit = 30 * 1000,
    timeLastMemed = new Date() - 30;
var user = getCookie('username');
var lineHolder = [];
var colour = "white";
const colours = ["rgb(255,255,255)", "rgb(0,0,0)", "rgb(0,0,127)", "rgb(0,147,0)", "rgb(255,0,0)", "rgb(127,0,0)", "rgb(156,0,156)", "rgb(252,127,0)", "rgb(255,255,0)", "rgb(0,252,0)"];

window.addEventListener('load', () => {
    setNavTime();
    setInterval(setNavTime, 1000 * 60);
});

$(() => {
    if (user == null) {
        loadText();
        login_signup();
    } else {
        setup();
    }
})

function setup() {
    $("#input").keypress((e) => {
        if (e.which == 13) {
            sendMessage({
                username: user,
                // username: $("#name").val(),
                message: `<span style="color: ${colour}">${$("#input").val()}</span>`,
                time: ((new Date()).toTimeString().split(' ')[0])
            }); $("#input").val("");
        } 
    })
    $(document).keydown((e) => {
        if((e.which >= 48 && e.which <= 57) && e.altKey) {
            colour = colours[e.which - 48];
        }
    })
    
    $("#partyParrot").click(() => {
        postAsciiArt(partyParrotAsciiArt)
    })
    $("#rickAscii").click(() => {
        postAsciiArt(rickAstleyAsciiArt)
    })
    getMessagesThenTitle()
}

socket.on('message', addMessages)

function addMessages(message) {
    $("#chat-log").append(`<div>${message.time || "N/A"} &lt;@${message.username}&gt; ${message.message}</div>`);
    $("#chat-log").scrollTop($("#chat-log")[0].scrollHeight);
}
function getMessages() {
    $.get(url, (data) => {
        data.forEach(addMessages);
    })    
}

function getMessagesThenTitle() {
    $.get(url, (data) => {
        data.forEach(addMessages);
    }).done(() => {
        loadText();
    });
}

function sendMessage(message) {
    $.post(url, message)
    checkForCommand(message.message)
}

function setNavTime() {
    $("#time").text(`[${((new Date()).toTimeString().split(' ')[0]).substr(0, 5)}]`);
}

function postAsciiArt(lineArr) {
    if (new Date() - timeLastMemed > memeLimit) { // Sets a limit of posting ASCii Art
        timeLastMemed = new Date();
        lineArr.forEach(line => {
            sendMessage({
                username: user,
                message: line,
                time: ((new Date()).toTimeString().split(' ')[0])
            });
        });
    } else {
        var s = (memeLimit / 1000) - Math.round((new Date() - timeLastMemed) / 1000);
        postLine("SlackBot", "red", `You have to wait ${s} until you can post another ASCii Art`);
    }
}

function getCookie(cookieName) {
    var name = cookieName + "=";
    var decodedCookie = decodeURIComponent(document.cookie);
    var ca = decodedCookie.split(';');
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
            c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
        }
    }
    return null;
}

function setCookie(cookieName, cookieValue) {
    document.cookie = `${cookieName}=${cookieValue}`;
}

function login_signup() {
    postLine("SlackBot", "green", "Type 'login' to login, or 'signup' to signup");
    $("#input").keypress((e) => {
        if (e.which == 13 && user == null) {
            lineHolder.push($("#input").val());
            $("#input").val("");
            checkLineHolder();
        }
    })
}

function checkUser(state, username) {
    return isEmpty($.get(`${window.location.href}${state}/${username}`));
}

function checkLineHolder() {
    if (lineHolder.length == 1) { // First word
        if (lineHolder[0] == "arnie") { // Easter Egg shhhh
            arnieAsciiArt.forEach(line => {
                postLine("SlackBot", "#7ee85b", line);
            }); postLine("SlackBot", "red", "Now please type either 'login' to login, or 'signup' to signup");
            lineHolder.pop();
        } else if (lineHolder[0] != "login" && lineHolder[0] != "signup") {
            postLine("SlackBot", "red", "Please type either 'login' to login, or 'signup' to signup");
            lineHolder.pop();
        } else {
            postLine("SlackBot", "green", "Please type a username");
        }
    } else if (lineHolder.length == 2) {
        if (checkUser(lineHolder[0], lineHolder[1])) { // check if username exists if, lineHolder[0] == "signup"
            postLine("SlackBot", "red", "This username exists already, please type another");
            lineHolder.pop();
        } else {
            postLine("SlackBot", "green", "Please type a password");
            // $("input").prop("type") = "password";
        }
    } else if (lineHolder.length == 3) {
        // $("input").prop("type") = "text";
        $.post(`${window.location.href}${lineHolder[0]}`, {
            username: lineHolder[1],
            password: lineHolder[2]
        }).done((data, statusText, xhr) => {
            console.log(xhr);
            console.log(data);
            if (xhr.status != 200) {
                postLine("SlackBot", "red", "The password is incorrect, please try again");
                lineHolder.pop();
            } else {
                setCookie("username", lineHolder[1]);
                user = getCookie('username');
                sendMessage({
                    username: "SlackBot",
                    message: createLine("SlackBot", "green", `User ${lineHolder[1]} has joined SlackChat`),
                    time: ((new Date()).toTimeString().split(' ')[0])
                });
                location.reload();
                setup();
            }
        });
    }
}

function createLine(user, color, message) {
    var d = ((new Date()).toTimeString().split(' ')[0]);
    return `<div>${d} &lt;${user}&gt; <span style="color: ${color}"> ${message} </span></div>`;
}

function postLine(user, color, message) {
    var d = ((new Date()).toTimeString().split(' ')[0]);
    $("#chat-log").append(`<div>${d} &lt;${user}&gt; <span style="color: ${color}"> ${message} </span></div>`);
}

function isEmpty(obj) {
    for (var key in obj) {
        if (obj.hasOwnProperty(key)) return false;
    }
    return true;
}

function checkForCommand(message) {
    var words = message.replace(/(<([^>]+)>)/ig, "").split(' ');
    if (words[0].substr(0, 1) == '/') {
        var cmd = words[0].substr(1, words[0].length);
        switch (cmd) {
            case 'slap':
                if (words.length == 2) slap(user, words[1]);
                break;
            case 'parrot':
                postAsciiArt(partyParrotAsciiArt);
                break;
            case 'rick':
                postAsciiArt(rickAstleyAsciiArt);
                break;
            case 'bee':
                postAsciiArt(ohBeehaveAsciiArt);
                break;
        }
    }
}

function slap(user, victim) {
    sendMessage({
        username: "SlapBot",
        message: createLine("SlapBot", "yellow", `${user} slaps ${victim} around a bit with a large trout`),
        time: ((new Date()).toTimeString().split(' ')[0])
    });
}

// Put long functions with text stuff down here

function loadText() {
    var d = ((new Date()).toTimeString().split(' ')[0]);
    var text = ['<div>' + d +
        ' &lt;SlackBot&gt; <span style="color: #1fa58e">                                                      </span></div>',
        '<div>' + d +
        ' &lt;SlackBot&gt; <span style="color: #1fa58e">        _____ _            _    _____ _           _   </span></div>',
        '<div>' + d +
        ' &lt;SlackBot&gt; <span style="color: #1fa58e">       /  ___| |          | |  /  __ \ |         | |  </span></div>',
        '<div>' + d +
        ' &lt;SlackBot&gt; <span style="color: #1fa58e">       \ `--.| | __ _  ___| | _| /  \/ |__   __ _| |_ </span></div>',
        '<div>' + d +
        ' &lt;SlackBot&gt; <span style="color: #1fa58e">        `--. \ |/ _` |/ __| |/ / |   | \'_ \ / _` | __|</span></div>',
        '<div>' + d +
        ' &lt;SlackBot&gt; <span style="color: #1fa58e">       /\__/ / | (_| | (__|   <| \__/\ | | | (_| | |_ </span></div>',
        '<div>' + d +
        ' &lt;SlackBot&gt; <span style="color: #1fa58e">       \____/|_|\__,_|\___|_|\_\\____/_| |_|\__,_|\__|</span></div>',
        '<div>' + d +
        ' &lt;SlackBot&gt; <span style="color: #d6100d">       SlackChat 0.6.9  [made on Nov 11 2019 16:46:20]</span></div>',
        '<div>' + d + ' &lt;SlackBot&gt; <span style="color: #e2faf6"></span></div>'
    ];
    text.forEach(t => {
        $("#chat-log").append(t);
    });
    $("#chat-log").scrollTop($("#chat-log")[0].scrollHeight);
}

const partyParrotAsciiArt = [
    "                                                  ",
    "                              ,ddoodd,            ",
    "                         .cc' ,ooccoo,'cc.        ",
    "                      .ccldo;...',,...;oxdc.      ",
    "                   .,,:cc;.,'..;lol;;,'..lkl.     ",
    "                  .dOc';:ccl;..;dl,.''.....oc     ",
    "                .,lc',cdddddlccld;.,;c::'..,cc:.  ",
    "                cNo..:ddddddddddd;':clll;,c,';xc  ",
    "               .lo;,clddddddddddd;':clll;:kc..;'  ",
    "             .,c;..:ddddddddddddd:';clll,;ll,..   ",
    "             ;Oc..';:ldddddddddddl,.,c:;';dd;..   ",
    "           .''',:c:,'cdddddddddddo:,''..'cdd;..   ",
    "         .cdc';lddd:';lddddddddddddd;.';lddl,..   ",
    "      .,;::;,cdddddol;;lllllodddddddlcldddd:.'l;  ",
    "     .dOc..,lddddddddlcc:;'';cclddddddddddd;;ll.  ",
    "   .coc,;::ldddddddddddddlcccc:ldddddddddl:,cO;   ",
    ",xl::,..,cccccccccccccccccccccccccccccccc:;':xx,  ",
    "cNd.........................................;lOc  ",
    "                                                  "
];

const rickAstleyAsciiArt = [
    "Rick ASCII",
"................................................. ........................................,-~~”””’~~–,,_",
".................................................. ..................................,-~”-,:::::::::::::::::::”-,",
".................................................. .............................,~”::::::::’,::::::: :::::::::::::|’,",
".................................................. .............................|::::::,-~”’___””~~–~”’:}",
".................................................. .............................’|:::::|: : : : : : : : : : : : : :",
".................................................. .............................|:::::|: : :-~~—: : : —–: |",
".................................................. ............................(_”~-’: : : : : : : : :",
".................................................. .............................”’~-,|: : : : : : ~—’: : : :,’–never gonna",
".................................................. .................................|,: : : : : :-~~–: : ::/ —–give you up!",
".................................................. ............................,-”\’:\: :’~,,_: : : : : _,-’",
".................................................. ......................__,-’;;;;;\:”-,: : : :’~—~”/|",
".................................................. .............__,-~”;;;;;;/;;;;;;;\: :\: : :____/: :’,__",
".................................................. .,-~~~””_;;;;;;;;;;;;;;;;;;;;;;;;;’,. .”-,:|:::::::|. . |;;;;”-,__",
"................................................../;;;;;;;;;;;;;;;;;;;;;;;;;;;;,;;;;;;;;;\. . .”|::::::::|. .,’;;;;;;;;;;”-,",
"................................................,’ ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;|;;;;;;;;;;;\. . .\:::::,’. ./|;;;;;;;;;;;;;|",
".............................................,-”;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\;;;;;;;;;;;’,: : __|. . .|;;;;;;;;;,’;;|",
"...........................................,-”;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;’,;;;;;;; ;;;; \. . |:::|. . .”,;;;;;;;;|;;/",
"........................................../;;;;;;;;;;;;;;;;;;;;;;;;;;|;;;;;;;;;;;;;;\;;;;;;;; ;;;\. .|:::|. . . |;;;;;;;;|/",
"......................................../;;,-’;;;;;;;;;;;;;;;;;;;;;;,’;;;;;;;;;;;;;;;;;,;;;;;;; ;;;|. .\:/. . . .|;;;;;;;;|",
"......................................./;;;;;;;;;;;;;;;;;;;;;;;;;;,;;;;;;;;;;;;;;;;;;;;;;; ;;;;;;;”,: |;|. . . . \;;;;;;;|",
"....................................,~”;;;;;;;;;; ;;;;;;;;;;;,-”;;;;;;;;;;;;;;;;;;;;;;;;;;\;;;;;;;;|.|;|. . . . .|;;;;;;;|",
"................................,~”;;;;;;;;;;;;;; ;;;;;;;;,-’;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;’,;;;;;;| |:|. . . . |\;;;;;;;|",
"...............................,’;;;;;;;;;;;;;;;;; ;;;;;;;/;;;,-’;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;,;;;;;| |:|. . . .’|;;’,;;;;;|",
"..............................|;,-’;;;;;;;;;;;;;;;;;;;,-’;;;,-’;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;,;;;;| |:|. . .,’;;;;;’,;;;;|_",
"............................../;;;;;;;;;;;;;;;;;,-’_;;;;;;,’;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;|;;; ;|.|:|. . .|;;;;;;;|;;;;|””~-,",
"............................/;;;;;;;;;;;;;;;;;;/_”,;;;,’;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ,;;| |:|. . ./;;;;;;;;|;;;|;;;;;;|-,,__",
"........................../;;;;;;;;;;;;;;;;;,-’...|;;,;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;;;;| |:|._,-’;;;;;;;;;|;;;;|;;;;;;;;;;;”’-,_",
"......................../;;;;;;;;;;;;;;;;,-’....,’;;,;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;;;;;;;|.|:|::::”’~–~”’||;;;;;|;;;;;;;;;;,-~””~–,",
"......................,’;;;;;;;;;;;;;;;;,’....../;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;|.|:|::::::::::::::|;;;;;’,;;;;;;;;;”-,: : : : : :”’~-,:”’~~–,",
"...................../;;;;;;;;;;;;;;;,-’......,’;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;;;;;;;;;;;|:|:|::::::::::::::’,;;;;;;|_””~–,,-~—,,___,-~~”’__”~-",
"..................,-’;;;;;;;;;;;;;;;,’......../;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;;;|:|:|:::::::::::::::|;;;;;;|.................. ...”-,\_”-,”-,”~",
"................../;;;;;;;;;;;;;;;;/.......,-’;;;;;;;;;;;;;;;;;Scroll Up;;;;;;;;;;;;;;;;;; ;;;;;;;|:|:|:::::::::::::::|;;;;;|................"
];

const arnieAsciiArt = [
    "                                                                                      ",
    "                                .....`   `..```                                       ",
    "                               `,,,,,..``......`                                      ",
    "                               ,,,,:::,,,::::,:,`                                     ",
    "                              `,::;:::::::;;;:::,`                                    ",
    "                              .,;;:..,:;;:,::::::.`                                   ",
    "                              ,::.   `,;:.```,;;:,`                                   ",
    "                              .:.   .,`::`.   ,;;:`                                   ",
    "                              ,.`   .,`,,,;   `:;:.                                   ",
    "                              .`      `:.`.    .::.                                   ",
    "                              .`      `:.       ,:.                                   ",
    "                             `.`      .;,       ,,`                                   ",
    "                             `,`     `:;,       ,.                                    ",
    "                             .:.     ,;;:      `,.                                    ",
    "                             .::.` `,;'';,`    ,:.                                    ",
    "                             ,:::,,:;'';;;:.``.::.                                    ",
    "                          ``.::::::;;;;;;';;:,:::,`                                   ",
    "                         `.,,:;:::::;;;;;;;;;:;;:,.``                                 ",
    "                        `,::,:;:;;;;;;;;;;;;;:;;;:,..`                                ",
    "                       `,::::::;;;;;;;;;;;;;;;;;;::,,..`                              ",
    "                       .::::::;;;;;;;;;;;;;;;;;;;;:::,,.                              ",
    "                      `,:;;:::;;;;;;;;;;;;;;;;;;;;::::,.`                             ",
    "                      .:;;;:::;;;;;;;;;;;;;;;;;;;;;;:::,.                             ",
    "                      .;;;;:::;;;;;;;;;;;:;;;;;;;;;;;:::.                             ",
    "                     `,;;';::;;;;;;;;;;::::;;;;;;;;;;:::,                             ",
    "                     `:;;;:::;;;;;;;;;;;::;;;;;;;;;;;:::,`                            ",
    "                     `;;';:::;;;;;;;;;;;;;;;;;;;;::;;;;:,   `.,,.                     ",
    "                     `:;';::::;;;;''''';;;;;;;;;;:::;;;;,  `,;;:;.                    ",
    "                      ,';;:::::;;;;;;;;;;;;;;;;;::::;';;:  ,;'';;,`                   ",
    "                     `,;;:::::;;;;;;;;;;;;;;;;;;::::;;;;,  ,'+'';:.                   ",
    "                      ,':;::::;;';;;;;;;;;;;;;:::::::;';.  ;'++'';,                   ",
    "                      `;;;::::;;;;;;;;;;;;;;;;:::::::;':  `'''''';:.``                ",
    "                      `:;,,:::;;;;;;;;;;;;;;;;:;;;:,:':`  .'+''''';:,,.`              ",
    "                       `.`.:::;;;;;;;;;;;;;;;;;:;;:,:;,   :'+'''''';;::,.             ",
    "                         `,::;;;;;;;;;;;;;;;;;;::::.,;:,.,'+++''''''';;::.            ",
    "                         .;;:;;;;;;;;;;;;;;;;;;:::,`.;';;;'++''''''''';;:,            ",
    "                         ,';;;::;;;;'';';;;;;;;;::,.,++'''''''''''''''';:,`           ",
    "                         `;;;;;:;;;;;;;';;;;;;;;;::,;++'';'''''''''''''';,            ",
    "                         `:;;;;;;;;;;;;;;;;;;;;;;:;;'+++'''''''''''''''';,            ",
    "                         `:;;;;;;;;;;;;;;;;;;;;;;;;'+++++++''''''''''''';.            ",
    "                        `,:;;;;;;;;;;;;;;;;;;;::;:;'++++++++++'''''''''';.            ",
    "                       `,;;;;;;;;;;;;;;;;;;;;;::;:'+++++++++++++''''''''',            ",
    "                      `,;;;;;;;;;;;;';;;;;;;;;:::;'+++++++++++++''''''';;:`           ",
    "                     `:;;';;;;;;;;;;;;;;;;;;;;;::;'++++++++'++++++''''';;:.           ",
    "                    `:;;'';';;;;;;;;;;;;;;;;;;:::;''++++++++++'++'++''';;:.           ",
    "                    .:;;'+'';;;;;;;;;;;;;;;;;::::''''+++++++''++++'''''';:`           ",
    "                   `,;;''''';:;;;;;;'';;;;;;;;;;;'''''''++':,,;'''+'''';:.            ",
    "                  `,:;'''++':,;;;;;;;;;;;;;;;;:;;''''':::,,````,'+''':,``             ",
    "                 `.:;;'''+++,.;;;;;;;;;';;;;;;,::;'';;:,```    `.:'':``               ",
    "                `.:;;;''++++.,;;;;;;;;''';;;;;,.,:;';';:         `,:.                 ",
    "                .:::;;''+++',:;;;;;;;;'';;;;;;;..:;';';:          ``                  ",
    "               .:::;;;''+++';;;;'';;;''';;;;;;;..,:;'';:.                             ",
    "              `,::;'''''++++';;'''';'';''';;;;;,..,;'''::                             ",
    "              .:::;;'''''++'';;;'''''''''';;;;;:...:;'';,`                            ",
    "             .::::;;;'''+++';;'''''''''''''''';:...,;;'':,                            ",
    "             ,:::::;;''''++';;''''''''''''''''',..`.:''';:`                           ",
    "            `:::;::;;''''++';;;''+++'''''''''';,.```,;;'':,`                          ",
    "            .::;;;;;;''''+'';;;'''''+++++++'+':..```.:;'';:;                          ",
    "           `:::;;;;;''''++';:::;''''''''''''';,..````,;'';;:,,`                       ",
    "           `::;;'''''''''+';:::::;''''''''';:,,.````.,''';'';:,`                      ",
    "          `,:;;;'';''''''';:::::::::;'''';::,,,,.````.;'';''';:,`                     ",
    "          .:;;;;'''''''+';:,::::::::::::::::,,...`````:'';'''';;:`                    ",
    "          ,:;;;;''+++'+++;::::::::::,,,,,,,::,,...````,;''';''';:,`                   ",
    "  `...... .:;;;;''+++++++'::::::::::,,,,,,,,:,....````,;''';;'';;;:`                  ",
    " `.,,,:,,,,:;;;''++++++++';:,,::,::,,,,,,,,,,,....````,;'''';';;;;;,                  ",
    " ...,:;:::::;;''+++++++++';:,,,,,,,,:,,,,,,,,.....````.;'''';;;;;;::.                 ",
    " ```.,::;;;:::;''+++++++++;;::,,,,,,,,,,,,,,,,....`....:''';;;;;:;::,`  ``            ",
    "  `````.:;;::::;;'+++'++++';:::,,,,,,,,,,,,,,,.........:''';;;;;;::::,..,,,.`         ",
    "  `..` `.,;;:::;;;;'+++'++';:::,,,,,,,,,,,,,,.........,;'';;;;;;;;:::;;;;;:,....``    ",
    " ``..`````,,,,:;;;;;'++''++;::,,,,,,,,,,,,,,......`...:'';;;;;;;;;;;;;;:,,.,:::::,`   ",
    " `...`````````.:;;;;''++'++':::,,,,,,,,,,,,..........,;'';';;;;;;;;;'';,````.:::,,.`  ",
    " `...````````` ,;;;;;'''+++';:::,,,::,,::,,.,........:'''';;;;;;;;;;;;,``````...````  ",
    " ``...``````````,;;;;''''+++':::,,,,::,,::,,.....,,.,:''';;;;;;;;;;;:,..````````````` ",
    " ``....```````` `:'';;''''++';:::,,,,,,,,,,,,,..,,,.,;''';;;;;;;;;;,,..````` ```````` ",
    "  `..```````````.:''';'''+'+';;;:,,,,,,,,,,,,,,,,,..,'''';;;;;;;;:.``.``````` ``````. ",
    "   ..```````````,;'';;;''++'':::::,,,,,,,,,,,,,,,,..:'''';;;;;;;;,``````` ``  `````.. ",
    "   `.....``````.,;''';;''+''';::::::::,,,,,,,,,,,,..:'''''';;;;,.`````````````````... ",
    "   `......``````.:;';;;;+''''::::::::::,,,,,,,,,,,.,;''''''';;:.  ````````````````.., ",
    "   `......```````.:;;;;;'+''':,:::::::::::,,,,,,,,,,;'''''';;:,```````````````````... ",
    "   `.,...`.```````.,;;;;'+++';::::::::;;::::::,,,,::;''';'';;:.```````````````````..` ",
    "    .,...``````````.,;;;''::,,,,:;;;'''';;;;;;;;;:;'''''''';;:.```````.`.``````....`  ",
    "   ``,,....`````````.;'';;:,,,,::;;''''''';;;;;;;;;;;''''''';:,...........````....`   ",
    "    ``,,......``````.:';;::::::::;;;;;;;;;:;::::::,::;;''''''':,,,,,,,.,...`.....`    ",
    "      `.,,.....`.``..,;;;::::::::::::::::::::::,,,,,::::;;''+'':,,,,,..,.......``     ",
    "       `,,,,...`.....,;;;;::::::::::::::::::,,,,,,,,,:::::;'''';:,,,,....,...,.`      ",
    "                                                                                      "
    ];

    const ohBeehaveAsciiArt = [
"           ``+:.```````,,.`````````.,;:,..,::::,,,,,,,,,,:::::::;'+''+'''''''''''''''';;;;:::;#@+###@@#######+++:;++",
"           ``+;.```````````````````.,:,..,;;:,,,,:,:,::,:::::,:;;:;;''''''''''''''''++';;;;;:;##+##@#####+++++++:'#@",
"           ``':.``````` ```````````.,,..,;+':::::::,::,:::::::::;;;;;;'''''''''''''''+'';;:;:;##++######++++++#+;+##",
"           ``';.````           ```..,..,:;';:,...,,,,:::;:;;;::::::;'';;''''''''''+++##';;;::;##++###++##+++++++''##",
"          ```';,`````         ` ```...,:;:::;;:::;;;:;;;;;;;;;;:;:::'';;''''''''''+##+#';;:::;##++###+++++'''''';##@",
"           ``';,```        ` ,':```..,,::,,,:::';;;''''+'''''';;;:;:;;:;;''';'''''+#+##';;:::;##++###++++''''''';+##",
"          ```;;;`         ``,###```.,,,,,,,:,;;';;'''''';+'+''';+''';;;:::;;;''''''+###';;:::;##++###++++''''''''###",
"          ```;;;`    `,+####+#+#;`.,,,,,,,,,;;;;;''++'###'+'+;''''''';;'';;;;;;;;'''+#+';;:::;##++###++++'''''''+###",
"          ```:';` `.'######+++#+;,,,,,,:,,;;;';''+''####+#'+';'+'++';''''';;;;;;;'''+++';;:::;##++###++++''''''+####",
"          ```:';` `++##########+;,,,,,:,,:;;+:;'+;######+++;+'''++#+++'+'+'''';;;''''''';;:::;##++##+++++''''''+####",
",`        ```,';` `'+######:.;';;,,,,,,,:;;':''''####+##++#+''''++#++++';'';'''';;''''';;;:::;##++###++++'';'''+####",
",`        ```.';` `'+##+###:,:::::,,,,,:;';+;''+#+#@#+++++++'''++''+'++''';'''++';;'''';;;:::;##+++##++++'''''++####",
",`         `.'';` `'++++#;::::::::,,,:,;;;':+;'#+##++'+++++';+;+''+';++++++;'';#+';;''';;;;::;##++###++++'''''++####",
".`        `,`,''` `;++++:,:::::::,,.,,;;+;;+:'#+##'#+'+#'++;+++++#++#+''''+'''+;'#';'';;;;;::;##++###++++'''''+#####",
".`        `,`.''` `;'++;:::;:;;:,.,,.':#;'';;++#@'#'+++++;'##+###+'###+'+''';'+'''+;';;';;;;:;##++###++++'''''+#####",
" `     ````,`,'+` `;'++;::;;;;;,,,,,;;';+';;#+##'+'#+'+';+##+#++++###+#+;+''+''+''+';;;;;:;;:;##++###++++'''''+####+",
"       `` `.`.++`  :'++;;;;;;;;:,,,:':''+;;#'+++;++'+'''+#+##++#+++##+'#++++''';''''';;;;;';:;##++###++++'''''+##@##",
"      ``  ```.#+` `;'++'';''';;::,,''+##;'+'''''++#++'+++###+#'##+#+++++++'''+'''''';;;;;;';:;##++###++++'''''+#####",
".`    ``` ````#+```;'++'';;''';,,:'#+++'+';#'+#'+++'+++####++++'##++++++#''++'''''+';;;;;;';:;##++###++++''''+####++",
"``..```````.`.++```:'#'++'''';:,,;#++#+''''#'#+;+'+'++++++#'++#++++++++++''++''+;';';':;';';:;##++###++++'''++#####+",
".........,.,...,```:'+'+#';;;;::,#+++'';'++#'++''+++'+++#++++++++++'+++++''''''+'''''+:;';';:;##++###++++''''+######",
".................``:'+'+#+;';;:,,#+++'+;'+##'###+'+'++###'+;+'#+'+++++++++'+;++++;''''::';';;;##++###++++''''+######",
".,..,..::::;;;;;;';;;'++##';;:,::#''++:;++#+'#+#+'+'+##++'+;+++++++++''+'+'''+'++''''';;+:';:;+#++###++++''''++###@#",
",.,,:;';...:++++###++++###';;:,:'#;++''''#++'+++'+'++##+'+#+'#+++#+#++''++''''+++'''''';';';:;##++###++++''''+######",
",,;`.,#.```:+'++;`.+++++##';;:::+++++;'+'##+'#++#++++###'#+++#+#+#+++'''+;';'+'+''''''';;;';:;##++###++++''''++#####",
",:,```#,```';;'';``+++++##';;;;;+:++''+'###+'###+++#+#+##++#++#+#++'+'+'';''+''+''++'+;;;;';:;##++###++++''''+#+####",
"::,```+,```.`:'''``'+'+++#';;;;;+'#++++####+'##+++##+#++++#+++#++++++'''''''''+''++++';;;;';:;##++###++++''''+#####@",
"'::` `',```.`,+''``;+''+++';;;';+++++++####++#++####++'+###+##++#+++++'''''++++++#++++';';';;;+#++###+++++''++###@@#",
"':;```;'``...;+++.:++''+++';;;';++++++#+'+++####+##++##+++++##++++++++'''+''++++####+'';';'';;++++###+++++''++######",
";':;.,:;..,..;+':`.'+'''++';;'''#'+++'###+++###+++####+++#+##+++++'++''''+'''+'+#+#++'';';';;;+#+++##+++++''+'+#####",
";';::,;:;;;;;'+++;';+''''++;;';';'++'++#+#####+++##+++#+++###++#++++++++''''+''####+++';';';;;+++++##+++++'''''+####",
"''+:::;:;''''+++++++++++''+';''+;'++'++######+++#######+++###+#+++++++'';;;';''###+++';;';';;;+#+++##++++++++'+#+###",
"''';:::;:;''''++++'''++''''+;''#;''+''+###+#+'+#####++++#+#++#+++++++'+;:::;:;'###++'';;';';;;+++++++++++++++'+++###",
"''''::::;:'''''''+'++''''''';'#''+'+++#####++++++++++#+++#++##+++++++;:;::::::+#@@#+++;;';;;';+''++++++++++'+'++####",
"++++',:;.::;'':;;;:::,,,,,,,,,,''+'''+######++++++++++#+#+##++++++++':;::::'+'+###++'+';';';';+++++##+++++''+'++##+#",
"''''':.,.,.``........`.``````.`'++++++#+#####''''+'+++#++++++++++''';::;;'###@#@@@@+'+';';';;;++#+###++++'''';;'';;'",
"''''';,..,.`.```...````````````+###++++######+'''+;;;;::::'''';';';,:+##@@@#++#@@+@++'';';''';++#+###++;;;;;;;;;;;;;",
",,,,:::,,.....................`+####'#++++####++';,,:,,,:::;;:;+;;;######+'';,:'@@#++'';';''';+######++'''''''''+++'",
",.,,,,,,,......................'####+###@@@@##++''##@@@@@@@###';+##@#;##'+++:::+##++++';'''';;+######+++++++####;:,,",
",,,,,,,:,,.....................`#####+#####+#;##@@@@#++++##+'@@@#@@@'++##' #':,'#+###'';';''';+##+###++++++++''+:,,,",
",,,,,,,:,,,.,,.,...............`########@###:#@+@@;+'';'+#+#++@@@@@@;#+##@+:::,:@'#+#'';';''';++#####++++++++''+,,,,",
",,,,,,,::::,,,,:,,,,,,,,,,,,,,,. @#####+###+,.@@@,;+##@####+';@#:'#@''++';;::,,:#+#+'+';''''';++#+###++++++++''+,.,,",
",,,,,,,:,,,,,.,..................`@+#+#####',,,+@,''''''+++';:@;,::@:#++''':::.#;++'''''''''';+######+++++++++'+,,,.",
",,,,,,,,,,,.......................`.++#####'::,.@.:;;;;;;'+';'#,,,:,#:;+''';:.#+;+;:'+''''''';+######+++++++++'+:,,.",
",,,................................`'++;'+#':,,,#:::'''+++:::@`,,,,:'':,:;;;+#:,+:.,:'';''''';++++###++###++++'+::,`",
"....................................`+,:,++':,,:.@,,;;;;;;;,+;,,,,,,,'@@@@#'`.,:'::,.,;;''''';++##########++++++::,.",
"....,,...,,..,.,.....,............,,.',::''+;:,:,';,:;;:,:'#':,,,,,,:;;;,,:,,.,,':::,,,:''''';+++####+++#+++++++:::,",
",,,,,,,,,,,,,,,,,,,,,,,,,,,,.......,,.++,:''':,,:,;#####@##'',,.,,,,,:+';:::,,,:';;:::.,:;''''+++++##++++++++++'::::",
",,,,::,,,,,,,,,,,,,,,,,,,,,,,,,.....,,;'#+'';;,:,,,..,:;;'';,,,.,,,,,.++;;;::,,:;;;;;:,,,:'';;++#####+++++++++++;::,",
",,,::::::,,,,,,,,,:::,,,,,,,,,,,.....,:;'+''';:,,,,,,:;;''';,.,,,,,...'++';;::::;;;;;:::::;;;;++#########++++++':::,",
":::::::::::,::::'+####+;:,:,,,,,,....,:;'+'''':,,,,,::;;'+;:,,,.,,,,..;;#';;;:,,:;;;;::;;:,..,:;;;:::;;;;';''''',,..",
"::::::::::::,:'#@@@@@@@@#;::::::,,,...,''##'';::,::::;;'+;;:,,,,,,,,,::;'+';;;:,,::;;;'';:,,...:::::,,:,:::;:::.```.",
":::::::::::::+@@@@@@@@@@@@+;::::,,,,,.,+++##.::,,::;;;'+';:::,::::;;::::;;+;;;::,...,:;'':,,:::,::::,:::;;;,.`````.,",
"::::::::::::+@@@@########@@#:::::,,,,,;;++##.,,,::;;;;+';::::::;;''::::::;:;;;:;:`,.....,:;::;;:,,::,::,,.```......,",
":::::::::::'@@@@###+++#+##@@#::::::,,,''++++::,,::;;;'';;:,,::::;;;;:::::;,;:',,:,;,+';:,.:;;;;::......```.,,,,..,.,",
"::::::::::;#@@#+###++##++##@@+:::::,,,'+#++;+,,:::;;;';;::,,::::;'';::,::;::;;:+.:::,:#';::,` ```..````..,::::,.....",
":::::::::'@@#+#':;:::;+###@@@'::::::,;++##,@.,,::;;::;;:::::::;;;;::::'#';,';;'',.,,,.,,,;;;,,....````.::,,::,..,...",
"::::::::::#@@##;:'####;;;####@#;:::::,,##+#:#.,,:;;;:;;'##;;+''';;'+:+#,+';,':,''''+'+''++::,:::,.``...,,,:,,,,..``.",
":::::::::;@@##;;+##@@@##;:@+##@+:::::,,'+,;++;::::;;:;;#,'+:;.:.:+:.;:+,'':;;';#+''+++++'++`:,,,,,.......,:,.....,..",
":::::::::'@#++:+#@@@@#@##:'###@@;::::,,,;,:##@,::;;;:;;+,:;+:.,.,',.;+::;':':+`+`+'++#+;,.#+;:,.',``................",
":::::::::+@##:;#@@@@++###+;#+##@:``.....`..'##+::::;:;;':,:;#':;:'##+;::;;:;';+::;..,:'';';#,::;.;;;:,.....,,:,,,,..",
":::::::::+###:+#@@@````+@#:;###@'`` `:,,``;#+#@,';;;;:;::::,:;;:;'';;;;;;;;:',#;::::;;';'',#,';;,+'';;:,.,,::::,....",
":::::::::+#++:#@@@+,:``,##';@##@#+++++'+:,,###@.:';;;:;::;;:':;;;;''':;;;:;::,+,.:;;;'';;##'#';;'+''''`::,,:.,......",
";;;:;;::;###':#@@@':,  ,+#+:###@@@@@@@.;+,';##@,.:;;;:::::::;;''''';;::;:;:#';##'#;::'#++##++:';;.++''';:::+'''`....",
"######++####';###@'';`.;+##:+#####@#`+.:,''+'@@,,.:;;;::::::::;;;;;;:::::,#++;#++''++++#####.,';;.#++'#,::;,''''`,,.",
"++##+#######+;###@':+'''#@#:#####@`:+.,,:`+##@@'::.;;;:::::,,,:::::::::::#'.++#++'+++++###,'':'';;#++++`:::`+'''+::'",
"++++++++++++#:++#@#,::'#@#+:####,,:'`,::.''#+#@@,,:,:;;;::::,,,::::::;;:#'+';##++#'+++#+,+'';';';'+++++,':::#'+'+.;;",
"+#########+##:;#####'+####;:@+.,::,;;+'+;'++##@#+::,:,;;;;;;::::;;;;;;'##++'.#+++#....;+'''',;+';',+++++';;''++++.::",
";+#;+########+:#++####@###:;`;.::.''';'; '+#####'',,,,,:;;'';;;;;;;';+@@##`:`#++#.';;:''';,+++++';`++++#;;;;,++++;::",
"@@@@@@@@@@@@@@::#+######@..;;,::.+'''''',;.######;+,,,,:::;'''''''+#@@@+##+''#++,+'+:;';;#++++++';.#+++#.;;:`++++#.;",
"@@@@@@@@@@@@@@#::#+++#':.,+;'::;',`;+''+:##'##@###;'+,`,,;;::#+##@@@@#@+####+++#;'';#,'++++++++#'':#++++`;;;`#+++';'",
"##@@@@@@@@@@@###,,'+.;:,,''+.:;,:::::.`'+##,######+++'+':..,++###,'++@:'###:+++`;;'+,###+#++##.;;''+++++.;::,#++++#:",
"################@:.';:::';'`::,:::::,,:,###;'#####+++''''####+##;;'+#@+'###'@#'+;''.++###+#;.';;;'';++++;'::;#++++'`",
"++++++++#######@;.';;::,;'+::;''`,:::;:.+:#.++####+++'';;;''';#;::;+##+++#+##@:;;'+###+###,';;;:;''.+++++;::'++++++:",
"''''''''++++++#`;;'+,:.+;'`::.;''+;`;,:.'++#.'+##+++''''''';;::++#+'#.`##;#@#`;;;'.##+++###';;;'.''`++++#;;;''#+++'+",
"'''''''''''''':::;'`:;+'';;::'''''''`::.''++'+';#++'';;;;;';;:''''#'@'##+#@@'+;;;:##+++#'####;,#++',#+++#,;;';#++++#",
"''''''''''''''.,''';:`''+`::''''';+',::.+''''#+#+++'';;;;;;::,..;+#;:#####@@;';;+'###+#`:+'####++++;#+++#`;;';#:++++",
"''''''''';';''.#;'`:;'''';:;`:+''++'';:.+'#+++#;.+''';;;;;:::...'#',+.+##@@`';;;`#+#++:':;'####;##++#++++`;;;;'`++++",
"'''''''';;;;;;'+'+:;'@@#.:::;'',#'++#;::#+##+##++:++''++''';,,::;#;;+;,##@##+'';######:;'+'######++'+++++.;;';:,#+++",
"'''''';;;;;;;,'#',#@.  `@@:+''''@+'''@;:#++'''++#@#;#'''''''@''''@#'''#`@''''''@#''''@+''''+'''''''@,++++;';'+:;#+++",
"''''''''';;;;:'#'';      ,#@    @.   +:;:#.       '#@       @    #'   :'@      @@    '@    '       @`++++#';+;:''+++",
"';;;;;;;;;;;';'+'@        @@    @.   +;:`#.        @@       @    #'   :'@      #@,   ,@    @       @`#+++#:'+:;':+++",
";;;;;;;;;;;;;;'#+;   ;#   .@    @.   +;:.@.   +;   +@    ..`@    #'   :'@      '#'   `@    @    ..`@,#+++#,'+;;',#++",
";;;;;;;;;;;;;'+.#,   '@   `@    @.   +;::@.   '@   ;@    @+;#    #'   :+@   .  .@@    @    @    @#+;;#++++.+';;;`#++",
";;;;;;;;;;;;;';'#.   '@    @    @.   +':;+.   '@   ;@    @:.+    #'   :#'   ,   @@    @    @    @+';'+++++.#:;;;,#++",
";;;;;;;;;;;;:+`;#.   '@    @         +'::'.   '.   @@    +'+@         :@,   ;   @@    @    @    '''+;;++++,#:';;;+++",
";;;;;;;;;;;;.'.:#.   '@    @         +'::+.      `@@@       @         :@`   +   @@    @   `@       @;.++++:#'';;';+#",
";;;;;;;;;;;':+::#.   '@    @         +:::#.        @@       @         :@    @   @#`   #   :@       @;`++++'##;;;;,##",
";;;;;;;;;;;''+::#.   '@   `@    '`   +,::#.   ++   ,@    ';;@    ;,   :@   .@   #+:   ;   +@    ;;;+;,#++++##,;;;,#+",
";;;;;;;;;;;;++::#.   '@   `@    @.   +,::+.   +@    @    @;,#    #'   :@   .;   ;#+   ,   @@    @'';;:#+++###.;;'.#+",
";;;;;;;;;;;;'';:+.   '@   `@    @.   +';:#.   '@    @    @`,#    #'   :@        .#@       @@    @'';;'++++###`''',#+",
";;;;;;;;;;;;;;;:',   '#   .@    @.   +#;:#.   +@    @    @@@@    #'   :#         @@       @#    @@@#;':+++###`'''.#+",
";;;;;;;;;;;::,;:,+   .:   ;@    @.   +#.:+.   `    `@       @    #'   :;   ,@    @@       @#       @;;`+++##+,++'.#+",
";;;;;;;;;;;:,';;.@        @@    @.   ++ :+.        '@       @    #'   :.   ;@    @#       ##       @;:`#++###;+';,++",
";;;;;;;;;;;:.+:;;+@      @'@    @.   +',;+.       .@@       @    #'   :    +@    @#.     .+#       @;;,#++###++;',++",
";;;;;;;;;;;:,';;'++@@@@@@'`;@@@@#@@@@#'+;:@@@@@@@@#''@@@@@@@#@@@@+#@@@@@@@@@+@@@@##@@@@@@@;;@@@@@@@#;;'#++###+';';++",
";;;;;;;;;;;;+'+''+'+.;;.''.:'''+;::`+''#:;'+#..;;.;:;:'';''''+++### `:'```#+++++;;#++++##;;;';+++++';;'+++#@##';''++",
";;;;;;;;;;;.+'#;;+'#:::`'+::'''#,::.+++'`:'##+#,'''`;;''''''++++####'`:'``#++++'''++++###.;;;,++++#';;;:++@@#:;;'+++",
";;;;;;;;;;;,''#;,+'+':;'';;;''++`:::#'''`''#+'# +';';'''''''+++++###,#.`+``++++++;;####++`;;;`++++#:;'',##@@++'''#++",
"'`.:,;;;;;;:+''':#',;:;#'.::++'+';:;++++'''+#'+'' +;;'''''''+++++###;++' ;:'+++++';#+@#++.;;;.#++++.;::,';'+';;;;'+:"];